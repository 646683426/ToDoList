{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\vscode\\\\workspace\\\\to_do_list\\\\to-do-list\\\\src\\\\component\\\\ToDoList.js\";\nimport React from 'react';\nimport '../style/ToDoList.css';\n\nclass ToDo extends React.Component {\n  render() {\n    let {\n      list,\n      changeState,\n      onBlur,\n      onClick,\n      remove,\n      state\n    } = this.props;\n    list = list.map((item, index) => {\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"to-do\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"check-box\",\n          index: index,\n          type: \"checkbox\",\n          onClick: e => {\n            changeState(e, state);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 11,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"span\",\n          children: item.isClick ? /*#__PURE__*/_jsxDEV(\"input\", {\n            index: index,\n            id: \"input\",\n            defaultValue: item.title,\n            autoFocus: true,\n            onBlur: e => {\n              onBlur(e, state);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 19,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            onClick: e => {\n              onClick(e, state);\n            },\n            index: index,\n            children: item.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          tindex: index,\n          onClick: e => {\n            remove(e);\n          },\n          children: \"-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 21\n        }, this)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 9,\n        columnNumber: 17\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"do-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: this.props.children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: list\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this);\n  }\n\n} // class Done extends React.Component {\n//     render() {\n//         let done = this.props.done\n//         done = done.map((item, index) => {\n//             return (\n//                 <li key={item.id} className='done'>\n//                     <input\n//                         defaultChecked\n//                         className='check-box'\n//                         dindex={index}\n//                         type='checkbox'\n//                         onClick={(e) => { this.props.doing(e) }} />\n//                     <span\n//                         className='span'>\n//                         {item.isClick ?\n//                             <input\n//                                 index={index}\n//                                 id='input'\n//                                 defaultValue={item.title}\n//                                 autoFocus\n//                                 onBlur={(e) => { this.props.onBlur(e, 'done') }}\n//                             />\n//                             :\n//                             <p\n//                                 onClick={(e) => { this.props.onClick(e, 'done') }}\n//                                 index={index}>\n//                                 {item.title}\n//                             </p>\n//                         }\n//                     </span>\n//                     <button\n//                         className='btn'\n//                         defaultChecked='true'\n//                         dindex={index}\n//                         onClick={(e) => { this.props.remove(e) }}>\n//                         -\n//                     </button>\n//                 </li>\n//             )\n//         })\n//         return (\n//             <div className='done-content'>\n//                 <h2>\n//                     {this.props.children}\n//                 </h2>\n//                 <ul>\n//                     {done}\n//                 </ul>\n//             </div>\n//         )\n//     }\n// }\n\n\nexport default class ToDoList extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.toDoRef = /*#__PURE__*/React.createRef();\n    this.state = {\n      toDo: [],\n      done: []\n    };\n\n    this.setToDo = () => {\n      localStorage.setItem('toDo', JSON.stringify(this.state.toDo));\n    };\n\n    this.setDone = () => {\n      localStorage.setItem('done', JSON.stringify(this.state.done));\n    };\n\n    this.toDo = e => {\n      let id = Date.now();\n\n      if (e.code === 'Enter') {\n        if (e.target.value.length === 0) {\n          alert('内容不能为空');\n        } else {\n          this.setState({\n            toDo: [{\n              id: id,\n              title: e.target.value,\n              isClick: false\n            }, ...this.state.toDo]\n          }, () => {\n            this.setToDo();\n          });\n          e.target.value = '';\n        }\n      }\n    };\n\n    this.change = (e, list) => {\n      const index = e.target.getAttribute('index');\n\n      if (list === 'toDo') {\n        let toDo = this.state.toDo;\n        toDo[index].isClick = !toDo[index].isClick;\n        this.setState({\n          toDo: toDo\n        });\n      } else {\n        let done = this.state.done;\n        done[index].isClick = !done[index].isClick;\n        this.setState({\n          done: done\n        });\n      }\n    };\n\n    this.changeDone = (e, list) => {\n      const index = e.target.getAttribute('index');\n\n      if (list === 'toDo') {\n        list = this.state.toDo;\n      } else {\n        list = this.state.done;\n      }\n\n      let isClick = list[index].isClick;\n      let id = list[index].id;\n      let text;\n\n      if (e.target.value.length === 0) {\n        text = list[index].title;\n        alert('内容不能为空');\n        list.splice([index], 1, {\n          id: id,\n          title: text,\n          isClick: !isClick\n        });\n        list === this.state.toDo ? this.setState({\n          toDo: list\n        }) : this.setState({\n          done: list\n        });\n      } else {\n        text = e.target.value;\n        list.splice([index], 1, {\n          id: id,\n          title: text,\n          isClick: !isClick\n        });\n        list === this.state.toDo ? this.setState({\n          toDo: list\n        }, () => {\n          this.setToDo();\n        }) : this.setState({\n          done: list\n        }, () => {\n          this.setDone();\n        });\n      }\n    };\n\n    this.changeState = (e, state) => {\n      console.log(e.target.getAttribute('tindex'));\n\n      if (state === 'toDo') {\n        this.setState({\n          done: [{\n            id: this.state.done.length,\n            title: e.target.parentNode.getElementsByTagName('span')[0].getElementsByTagName('p')[0].innerHTML\n          }, ...this.state.done]\n        }, () => {\n          this.setDone();\n        });\n        this.remove(e);\n      } else {\n        this.setState({\n          toDo: [{\n            id: this.state.done.length,\n            title: e.target.parentNode.getElementsByTagName('span')[0].getElementsByTagName('p')[0].innerHTML\n          }, ...this.state.toDo]\n        }, () => {\n          this.setToDo();\n        });\n        this.remove(e);\n      }\n    };\n\n    this.remove = e => {\n      e.target.getAttribute('tindex') !== null ? this.setState({\n        del: this.state.toDo.splice(e.target.getAttribute('tindex'), 1)\n      }, () => {\n        this.setToDo();\n      }) : this.setState({\n        del: this.state.done.splice(e.target.getAttribute('dindex'), 1)\n      }, () => {\n        this.setDone();\n      });\n    };\n\n    this.clean = () => {\n      localStorage.setItem('toDo', JSON.stringify([]));\n      localStorage.setItem('done', JSON.stringify([]));\n      this.setState({\n        toDo: [],\n        done: []\n      });\n    };\n  }\n\n  componentDidMount() {\n    //在缓存中获取任务\n    this.setState({\n      toDo: localStorage.getItem('toDo') !== null ? JSON.parse(localStorage.getItem('toDo')) : [],\n      done: localStorage.getItem('done') !== null ? JSON.parse(localStorage.getItem('done')) : []\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"title\",\n          children: \"ToDoList\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"\\u8F93\\u5165\\u5185\\u5BB9\\u5E76\\u6309\\u4E0B\\u56DE\\u8F66\\u6DFB\\u52A0ToDo\",\n          onKeyDown: e => {\n            this.toDo(e);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        children: [/*#__PURE__*/_jsxDEV(ToDo, {\n          list: this.state.toDo,\n          remove: this.remove,\n          changeState: this.changeState,\n          state: 'toDo',\n          onBlur: this.changeDone,\n          onClick: this.change,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u6B63\\u5728\\u8FDB\\u884C:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"to-do-count\",\n            children: this.state.toDo.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ToDo, {\n          list: this.state.done,\n          remove: this.remove,\n          changeState: this.changeState,\n          state: 'done',\n          onBlur: this.changeDone,\n          onClick: this.change,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u5DF2\\u7ECF\\u5B8C\\u6210:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"done-count\",\n            children: this.state.done.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"clean\",\n          onClick: this.clean,\n          children: \"\\u6E05\\u9664\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }, this);\n  } //向浏览器缓存添加任务\n\n\n}","map":{"version":3,"sources":["D:/vscode/workspace/to_do_list/to-do-list/src/component/ToDoList.js"],"names":["React","ToDo","Component","render","list","changeState","onBlur","onClick","remove","state","props","map","item","index","e","isClick","title","id","children","ToDoList","toDoRef","createRef","toDo","done","setToDo","localStorage","setItem","JSON","stringify","setDone","Date","now","code","target","value","length","alert","setState","change","getAttribute","changeDone","text","splice","console","log","parentNode","getElementsByTagName","innerHTML","del","clean","componentDidMount","getItem","parse"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport '../style/ToDoList.css';\r\n\r\nclass ToDo extends React.Component {\r\n    render() {\r\n        let { list, changeState, onBlur, onClick, remove, state } = this.props;\r\n        list = list.map((item, index) => {\r\n            return (\r\n                <li\r\n                    key={item.id} className='to-do'>\r\n                    <input\r\n                        className='check-box'\r\n                        index={index}\r\n                        type='checkbox'\r\n                        onClick={(e) => { changeState(e, state) }} />\r\n                    <span\r\n                        className='span'>\r\n                        {item.isClick ?\r\n                            <input\r\n                                index={index}\r\n                                id='input'\r\n                                defaultValue={item.title}\r\n                                autoFocus\r\n                                onBlur={(e) => { onBlur(e, state) }}\r\n                            />\r\n                            :\r\n                            <p\r\n                                onClick={(e) => { onClick(e, state) }}\r\n                                index={index}>\r\n                                {item.title}\r\n                            </p>\r\n                        }\r\n                    </span>\r\n                    <button\r\n                        className='btn'\r\n                        tindex={index}\r\n                        onClick={(e) => { remove(e) }}>\r\n                        -\r\n                    </button>\r\n                </li>\r\n            )\r\n        })\r\n        return (\r\n            <div className='do-content'>\r\n                <h2>\r\n                    {this.props.children}\r\n                </h2>\r\n                <ul>\r\n                    {list}\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n// class Done extends React.Component {\r\n//     render() {\r\n//         let done = this.props.done\r\n//         done = done.map((item, index) => {\r\n//             return (\r\n//                 <li key={item.id} className='done'>\r\n//                     <input\r\n//                         defaultChecked\r\n//                         className='check-box'\r\n//                         dindex={index}\r\n//                         type='checkbox'\r\n//                         onClick={(e) => { this.props.doing(e) }} />\r\n//                     <span\r\n//                         className='span'>\r\n//                         {item.isClick ?\r\n//                             <input\r\n//                                 index={index}\r\n//                                 id='input'\r\n//                                 defaultValue={item.title}\r\n//                                 autoFocus\r\n//                                 onBlur={(e) => { this.props.onBlur(e, 'done') }}\r\n//                             />\r\n//                             :\r\n//                             <p\r\n//                                 onClick={(e) => { this.props.onClick(e, 'done') }}\r\n//                                 index={index}>\r\n//                                 {item.title}\r\n//                             </p>\r\n//                         }\r\n//                     </span>\r\n//                     <button\r\n//                         className='btn'\r\n//                         defaultChecked='true'\r\n//                         dindex={index}\r\n//                         onClick={(e) => { this.props.remove(e) }}>\r\n//                         -\r\n//                     </button>\r\n//                 </li>\r\n//             )\r\n//         })\r\n//         return (\r\n//             <div className='done-content'>\r\n//                 <h2>\r\n//                     {this.props.children}\r\n//                 </h2>\r\n//                 <ul>\r\n//                     {done}\r\n//                 </ul>\r\n//             </div>\r\n//         )\r\n//     }\r\n// }\r\n\r\nexport default class ToDoList extends React.Component {\r\n\r\n    toDoRef = React.createRef();\r\n\r\n    state = {\r\n        toDo: [],\r\n        done: []\r\n    }\r\n\r\n    componentDidMount() {\r\n        //在缓存中获取任务\r\n        this.setState({\r\n            toDo: localStorage.getItem('toDo') !== null ? JSON.parse(localStorage.getItem('toDo')) : [],\r\n            done: localStorage.getItem('done') !== null ? JSON.parse(localStorage.getItem('done')) : []\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <header>\r\n                    <span className='title'>ToDoList</span>\r\n                    <input\r\n                        placeholder='输入内容并按下回车添加ToDo'\r\n                        onKeyDown={(e) => { this.toDo(e) }} />\r\n                </header>\r\n                <main>\r\n                    <ToDo\r\n                        list={this.state.toDo}\r\n                        remove={this.remove}\r\n                        changeState={this.changeState}\r\n                        state={'toDo'}\r\n                        onBlur={this.changeDone}\r\n                        onClick={this.change}>\r\n                        <span>正在进行:</span>\r\n                        <span className='to-do-count'>{this.state.toDo.length}</span>\r\n                    </ToDo>\r\n                    <ToDo\r\n                        list={this.state.done}\r\n                        remove={this.remove}\r\n                        changeState={this.changeState}\r\n                        state={'done'}\r\n                        onBlur={this.changeDone}\r\n                        onClick={this.change}>\r\n                        <span>已经完成:</span>\r\n                        <span className='done-count'>{this.state.done.length}</span>\r\n                    </ToDo>\r\n                </main>\r\n                <footer>\r\n                    <button\r\n                        className='clean'\r\n                        onClick={this.clean}>\r\n                        清除\r\n                    </button>\r\n                </footer>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    //向浏览器缓存添加任务\r\n    setToDo = () => {\r\n        localStorage.setItem('toDo', JSON.stringify(this.state.toDo))\r\n    }\r\n\r\n    setDone = () => {\r\n        localStorage.setItem('done', JSON.stringify(this.state.done))\r\n    }\r\n\r\n    // 按下回车后，添加进行任务\r\n    toDo = (e) => {\r\n        let id = Date.now();\r\n        if (e.code === 'Enter') {\r\n            if (e.target.value.length === 0) {\r\n                alert('内容不能为空')\r\n            } else {\r\n                this.setState(\r\n                    {\r\n                        toDo: [{ id: id, title: e.target.value, isClick: false }, ...this.state.toDo]\r\n                    },\r\n                    () => {\r\n                        this.setToDo()\r\n                    }\r\n                )\r\n                e.target.value = '';\r\n            }\r\n        }\r\n    }\r\n\r\n    // 点击进行修改\r\n    change = (e, list) => {\r\n        const index = e.target.getAttribute('index');\r\n        if (list === 'toDo') {\r\n            let toDo = this.state.toDo;\r\n            toDo[index].isClick = !toDo[index].isClick;\r\n            this.setState({\r\n                toDo: toDo\r\n            })\r\n        } else {\r\n            let done = this.state.done;\r\n            done[index].isClick = !done[index].isClick;\r\n            this.setState({\r\n                done: done\r\n            })\r\n        }\r\n    }\r\n\r\n    //完成修改\r\n    changeDone = (e, list) => {\r\n        const index = e.target.getAttribute('index');\r\n        if (list === 'toDo') {\r\n            list = this.state.toDo\r\n        } else {\r\n            list = this.state.done\r\n        }\r\n        let isClick = list[index].isClick;\r\n        let id = list[index].id;\r\n        let text;\r\n        if (e.target.value.length === 0) {\r\n            text = list[index].title;\r\n            alert('内容不能为空')\r\n            list.splice([index], 1, { id: id, title: text, isClick: !isClick })\r\n            list === this.state.toDo ?\r\n                this.setState({\r\n                    toDo: list\r\n                }) :\r\n                this.setState({\r\n                    done: list\r\n                })\r\n        } else {\r\n            text = e.target.value;\r\n            list.splice([index], 1, { id: id, title: text, isClick: !isClick })\r\n            list === this.state.toDo ?\r\n                this.setState(\r\n                    {\r\n                        toDo: list\r\n                    },\r\n                    () => {\r\n                        this.setToDo();\r\n                    }\r\n                ) :\r\n                this.setState(\r\n                    {\r\n                        done: list\r\n                    },\r\n                    () => {\r\n                        this.setDone();\r\n                    }\r\n                )\r\n        }\r\n    }\r\n\r\n    //更改任务完成状态\r\n    changeState = (e, state) => {\r\n        console.log(e.target.getAttribute('tindex'))\r\n        if (state === 'toDo') {\r\n            this.setState(\r\n                {\r\n                    done: [{ id: this.state.done.length, title: e.target.parentNode.getElementsByTagName('span')[0].getElementsByTagName('p')[0].innerHTML }, ...this.state.done],\r\n                },\r\n                () => {\r\n                    this.setDone();\r\n                }\r\n            )\r\n            this.remove(e);\r\n        }else{\r\n            this.setState(\r\n                {\r\n                    toDo: [{ id: this.state.done.length, title: e.target.parentNode.getElementsByTagName('span')[0].getElementsByTagName('p')[0].innerHTML }, ...this.state.toDo],\r\n                },\r\n                () => {\r\n                    this.setToDo();\r\n                }\r\n            )\r\n            this.remove(e);\r\n        }\r\n    }\r\n\r\n    // 从完成变成进行\r\n    // doing = (e) => {\r\n    //     this.setState(\r\n    //         {\r\n    //             toDo: [{ id: this.state.done.length, title: e.target.parentNode.getElementsByTagName('span')[0].getElementsByTagName('p')[0].innerHTML }, ...this.state.toDo],\r\n    //         },\r\n    //         () => {\r\n    //             this.setToDo();\r\n    //         }\r\n    //     )\r\n    //     this.remove(e);\r\n    // }\r\n\r\n    // 删除单个任务\r\n    remove = (e) => {\r\n        e.target.getAttribute('tindex') !== null ?\r\n            this.setState(\r\n                {\r\n                    del: this.state.toDo.splice(e.target.getAttribute('tindex'), 1)\r\n                },\r\n                () => {\r\n                    this.setToDo();\r\n                }\r\n            )\r\n            : this.setState(\r\n                {\r\n                    del: this.state.done.splice(e.target.getAttribute('dindex'), 1)\r\n                },\r\n                () => {\r\n                    this.setDone();\r\n                }\r\n            )\r\n    }\r\n\r\n    //清除所有任务\r\n    clean = () => {\r\n        localStorage.setItem('toDo', JSON.stringify([]));\r\n        localStorage.setItem('done', JSON.stringify([]));\r\n        this.setState({\r\n            toDo: [],\r\n            done: []\r\n        })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}